<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Save the Date • Tara & Nasser</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        :root{
            --bg:#f7fbf8;
            --card: rgba(255,255,255,.84);
            --ink:#1d2721;
            --muted: rgba(29,39,33,.64);
            --green:#2f7a57;
            --border: rgba(47,122,87,.16);
            --shadow: 0 18px 55px rgba(20,40,30,.16);
            --radius: 26px;
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0;
            color:var(--ink);
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            background:
                    radial-gradient(900px 520px at 15% 10%, rgba(47,122,87,.10), transparent 60%),
                    radial-gradient(900px 520px at 85% 20%, rgba(47,122,87,.07), transparent 60%),
                    linear-gradient(180deg, var(--bg), #fff);
            overflow-x:hidden;
        }

        /* Background video + overlay image */
        .bgVideo{
            position:fixed;
            inset:0;
            z-index:0;
            overflow:hidden;
            background:#e9f1ec;
        }
        .bgVideo video{
            position:absolute;
            inset:0;
            width:100%;
            height:100%;
            object-fit:cover;
            transform: scale(1.02);
            z-index:0;
        }
        .bgOverlay{
            position:absolute;
            inset:0;
            width:100%;
            height:100%;
            object-fit:cover;
            pointer-events:none;
            z-index:1;

            /* ✅ FIX: opacity must be 0..1 (not 50) */
            opacity:0.5;
            mix-blend-mode: soft-light;
        }

        /* Content */
        .wrap{
            position:relative;
            z-index:2;
            min-height:100%;
            display:flex;
            justify-content:center;
            align-items:center;
            padding: clamp(16px, 3vw, 34px);
        }
        .card{
            width:min(1040px,100%);
            border-radius: var(--radius);
            overflow:hidden;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transform: translateY(10px);
            opacity:0;
            animation: in .85s cubic-bezier(.2,.9,.2,1) forwards;
            background: transparent;
            border: 0;
        }
        @keyframes in{ to{ transform:translateY(0); opacity:1; } }

        .grid{ display:grid; grid-template-columns: 1.05fr .95fr; }
        @media (max-width: 900px){ .grid{ grid-template-columns: 1fr; } }

        /* Left panel */
        .invite{
            position:relative;
            padding: clamp(22px, 4vw, 46px);
            min-height: 520px;
            display:flex;
            align-items:center;
            justify-content:center;
            overflow:hidden;
            background: transparent;
        }

        .content{
            width:min(560px,100%);
            text-align:center;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            gap: 0;
        }

        .names{
            margin: 0 0 8px;
            font-family: "Cormorant Garamond", serif;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-size: clamp(60px, 6.8vw, 96px);
            line-height: 1;
            color: rgba(29,39,33,.86);
        }
        .sub{
            margin: 0 0 18px;
            font-family: "Cormorant Garamond", serif;
            font-style: italic;
            letter-spacing: .14em;
            text-transform: lowercase;
            font-size: 18px;
            color: rgba(29,39,33,.62);
        }
        .divider{
            width:min(440px, 86%);
            height:1px;
            margin: 18px auto 14px;
            background: linear-gradient(90deg, transparent, rgba(47,122,87,.25), transparent);
        }
        .date{
            margin: 12px 0 6px;
            font-family: "Cormorant Garamond", serif;
            letter-spacing: .14em;
            text-transform: uppercase;
            font-size: clamp(28px, 4vw, 50px);
            line-height: 1;
            color: rgba(29,39,33,.84);
        }
        .fine{
            margin: 10px 0 0;
            font-family: "Cormorant Garamond", serif;
            font-style: italic;
            letter-spacing: .12em;
            text-transform: lowercase;
            font-size: 18px;
            color: rgba(29,39,33,.58);
            line-height: 1.6;
            text-align:center;
        }

        .btn{
            appearance:none;
            border:1px solid rgba(47,122,87,.22);
            background: rgba(255,255,255,.78);
            color: rgba(29,39,33,.86);
            cursor:pointer;
            padding: 12px 16px;
            border-radius: 14px;
            font-weight: 700;
            transition: transform .14s ease, background .14s ease, box-shadow .14s ease;
            user-select:none;
            white-space:nowrap;
        }
        .btn:hover{
            background: rgba(255,255,255,.92);
            transform: translateY(-1px);
            box-shadow: 0 14px 30px rgba(20,40,30,.10);
        }
        .btnPrimary{
            background: rgba(47,122,87,.14);
            border-color: rgba(47,122,87,.34);
        }
        .btn[disabled]{
            opacity:.7;
            cursor:not-allowed;
            transform:none !important;
            box-shadow:none !important;
        }

        /* Right panel */
        .panel{
            padding: clamp(18px, 3.5vw, 34px);
            background: transparent;
            border: 0;
            display:flex;
            align-items:center;
            justify-content:center;
            min-height: 520px;
        }
        @media (max-width: 900px){
            .panel{
                min-height: auto;
                padding-top: 24px;
                padding-bottom: 28px;
            }
        }

        .panelInner{
            width: min(520px, 100%);
            text-align: left;
            background: rgba(255,255,255,.78);
            border: 1px solid rgba(47,122,87,.16);
            border-radius: 18px;
            padding: clamp(16px, 2.6vw, 22px);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .panel h2{
            margin:0 0 6px;
            font-family: "Cormorant Garamond", serif;
            letter-spacing: .12em;
            text-transform: uppercase;
            font-size: 18px;
            color: rgba(29,39,33,.86);
        }
        .panel p{
            margin:0 0 16px;
            color: rgba(29,39,33,.64);
            line-height:1.6;
            font-size:14px;
        }

        form{ display:grid; gap:12px; }
        .row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
        @media (max-width: 520px){ .row{ grid-template-columns: 1fr; } }

        label{
            display:block;
            font-size:12px;
            color: rgba(29,39,33,.64);
            margin:2px 0 6px;
            font-weight:700;
            letter-spacing:.02em;
        }
        input, textarea, select{
            width:100%;
            padding:12px 12px;
            border-radius:14px;
            border:1px solid rgba(47,122,87,.18);
            background: rgba(47,122,87,.08);
            font-size:14px;
            outline:none;
        }
        textarea{ min-height:92px; resize:vertical; }
        input:focus, textarea:focus, select:focus{
            border-color: rgba(47,122,87,.55);
            box-shadow: 0 0 0 5px rgba(47,122,87,.14);
            background: rgba(47,122,87,.11);
        }

        /* ✅ Toast OUTSIDE the form (so it remains visible after hiding the form) */
        .toast{
            display:none;
            margin-top: 14px;
            padding: 22px 22px;
            border-radius: 22px;
            color: #1d2721;
            text-align: center;
            white-space: pre-line;
            font-family: "Cormorant Garamond", serif;
            font-size: 18px;
            line-height: 1.7;
            letter-spacing: .02em;
            animation: toastPop .38s ease-out forwards;
        }
        .toastTitle{
            display:block;
            font-family: "Cormorant Garamond", serif;
            font-weight: 600;
            letter-spacing: .14em;
            text-transform: uppercase;
            font-size: 20px;
            margin-bottom: 10px;
            color: rgba(29,39,33,.88);
        }
        @keyframes toastPop {
            from { opacity: 0; transform: translateY(10px) scale(.97); }
            to   { opacity: 1; transform: translateY(0) scale(1); }
        }

        @media (prefers-reduced-motion: reduce){
            .card{ animation:none; opacity:1; transform:none; }
        }
    </style>
</head>

<body>
<div class="bgVideo" aria-hidden="true">
    <video autoplay muted loop playsinline preload="auto">
        <source src="https://video.wixstatic.com/video/f71431_aee48663d58644239f1e6626816ff07d/1080p/mp4/file.mp4" type="video/mp4">
    </video>
    <img class="bgOverlay" src="https://static.wixstatic.com/media/f71431_ae3c49ee7741481eb55611c1e45d7cb2~mv2.png" alt="">
</div>

<main class="wrap">
    <section class="card">
        <div class="grid">

            <div class="invite">
                <div class="content">
                    <div class="sub">SAVE THE DATE</div>

                    <div class="names">TARA</div>
                    <div class="date">&amp;</div>
                    <div class="names">NASSER</div>
                    <div class="sub">are getting married</div>

                    <div class="divider"></div>

                    <div class="date">20</div>
                    <div class="date">SEPTEMBER</div>
                    <div class="date">2026</div>

                    <div class="fine">formal invitation to follow</div>
                    <div class="fine" style="margin-top:14px;">tara’s number is 0402 748 120</div>
                </div>
            </div>

            <aside class="panel" id="rsvp">
                <div class="panelInner">

                        <!-- Title + intro (hidden on success) -->
                        <h2 id="rsvpTitle">RSVP</h2>
                        <p id="rsvpIntro">
                            Please provide your contact details and <strong>mailing address</strong>.
                        </p>

                        <!-- Body wrapper -->
                        <div id="rsvpBody">

                            <!-- RSVP FORM -->
                            <form id="rsvpForm" autocomplete="on">

                                <div class="row">
                                    <div>
                                        <label for="fullName">Your name</label>
                                        <input id="fullName" name="fullName" required>
                                    </div>
                                </div>

                                <div class="row">
                                    <div>
                                        <label for="email">Email (optional)</label>
                                        <input id="email" name="email" type="email">
                                    </div>
                                    <div>
                                        <label for="attending">Will you attend?</label>
                                        <select id="attending" name="attending" required>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                                </div>

                                <div>
                                    <label for="address">Mailing address</label>
                                    <textarea id="address" name="address" required></textarea>
                                </div>

                                <div class="row">
                                    <div>
                                        <label for="guests">Guests (including you)</label>
                                        <select id="guests" name="guests" required>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="note">Message (optional)</label>
                                        <input id="note" name="note">
                                    </div>
                                </div>

                                <button class="btn btnPrimary" id="submitBtn" type="submit">
                                    Submit RSVP
                                </button>

                            </form>

                            <!-- SUCCESS MESSAGE (shown only after successful RSVP) -->
                            <div class="toast" id="toast" role="status" aria-live="polite"></div>

                        </div>
                    </div>

            </aside>

        </div>
    </section>
</main>

<script>
    const ENDPOINT = "https://script.google.com/macros/s/AKfycbz1KoPdsK6bA763d6N3UOp-k3tB6xhdI2_Mj0MvE5Bw_gNWLySV_IT3w3qRhnRJCK1_GA/exec";

    const form = document.getElementById('rsvpForm');
    const toastEl = document.getElementById('toast');
    const submitBtn = document.getElementById('submitBtn');

    function showSuccessToast(){
        // Hide heading and helper text
        const title = document.getElementById('rsvpTitle');
        const intro = document.getElementById('rsvpIntro');
        if (title) title.style.display = 'none';
        if (intro) intro.style.display = 'none';

        // Hide form only after success
        form.style.display = 'none';

        // Show prominent success card
        toastEl.innerHTML =
            '<span class="toastTitle">RSVP SUBMITTED</span>' +
            'We are so excited to celebrate with you on our special day.';
        toastEl.style.display = 'block';
    }

    function showErrorToast(msg){
        toastEl.style.display = 'block';
        toastEl.style.borderColor = 'rgba(160,30,30,.35)';
        toastEl.style.background = 'rgba(255,230,230,.92)';
        toastEl.textContent = msg;
    }

    form.addEventListener('submit', async (e)=>{
        e.preventDefault();

        // clear any prior error toast style if visible
        toastEl.style.display = 'none';
        toastEl.innerHTML = '';
        toastEl.textContent = '';

        const fd = new FormData(form);
        const payload = {
            fullName: (fd.get('fullName')||'').trim(),
            email: (fd.get('email')||'').trim(),
            attending: fd.get('attending'),
            guests: fd.get('guests'),
            address: (fd.get('address')||'').trim(),
            note: (fd.get('note')||'').trim(),
            userAgent: navigator.userAgent,
            pageUrl: location.href
        };

        if(!payload.fullName || !payload.address){
            showErrorToast("Please add your name and mailing address.");
            return;
        }

        // Prevent double submits
        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";

        try {
            const res = await fetch(ENDPOINT, {
                method: "POST",
                headers: { "Content-Type": "text/plain;charset=utf-8" },
                body: JSON.stringify(payload),
                redirect: "follow"
            });

            const raw = await res.text();
            let data = null;
            try { data = JSON.parse(raw); } catch(e) {}

            if (data && data.ok === true) {
                form.reset();
                showSuccessToast();
            } else {
                showErrorToast("Submission failed. Please try again.");
                console.warn("RSVP response:", raw);
                submitBtn.disabled = false;
                submitBtn.textContent = "Submit RSVP";
            }
        } catch (err) {
            showErrorToast("Submission error. Please try again.");
            console.error(err);
            submitBtn.disabled = false;
            submitBtn.textContent = "Submit RSVP";
        }
    });
</script>
</body>
</html>

